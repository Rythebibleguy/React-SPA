/* ========================================
   1. BASE STYLES
   ======================================== */
/* Critical base styles moved to inline CSS in <head> for instant rendering */

button, input, select, textarea {
    font-family: inherit;
}

/* ========================================
   2. MAIN CONTAINERS
   ======================================== */
/* Critical .app-container styles moved to inline CSS in <head> */

.app-container--stacked-modal-active {
    transform: scale(0.96);
    filter: brightness(0.7);
    border-radius: calc(3.8 * var(--element-width)) calc(3.8 * var(--element-width)) 0 0;
    overflow: hidden;
    box-shadow: 0 calc(1.8 * var(--element-width)) calc(7.4 * var(--element-width)) rgba(0, 0, 0, 0.3);
    transform-origin: center bottom;
}

/* ========================================
   3. TOP NAVIGATION
   ======================================== */
/* --------------------------------
   3.1 Info Button
   -------------------------------- */
.info {
    position: absolute;
    top: calc(4.6 * var(--element-width));
    left: calc(4.6 * var(--element-width));
    z-index: 100;
    display: flex;
    align-items: center;
    gap: calc(2.2 * var(--element-width));
    transform: translateZ(0); /* GPU acceleration to prevent shifting during 3D transform animations */
}

/* Note: Also has inline style="opacity: 0; pointer-events: none;" in HTML to prevent flash before CSS loads */
.info__button {
    background: #ffd54f;
    border: none;
    cursor: pointer;
    color: #444;
    width: calc(13.8 * var(--element-width));
    height: calc(13.8 * var(--element-width));
    border-radius: 50%;
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 calc(0.5 * var(--element-width)) calc(2 * var(--element-width)) rgba(0,0,0,0.15);
    transition: opacity 1.5s ease;
    opacity: 0;
    pointer-events: none;
}

.info__button.visible {
    opacity: 1 !important;
    pointer-events: auto !important;
}

.info__button:active {
    opacity: var(--btn-active-opacity);
    transition: none;
}

.info__button-icon {
    width: calc(6.8 * var(--element-width));
    height: calc(6.8 * var(--element-width));
}

/* --------------------------------
   3.2 Guest Menu
   -------------------------------- */
.guest-menu {
    position: absolute;
    top: calc(4.6 * var(--element-width));
    right: calc(4.6 * var(--element-width));
    z-index: 100;
    display: none;
    align-items: center;
    gap: calc(2.2 * var(--element-width));
    transform: translateZ(0); /* GPU acceleration to prevent shifting during 3D transform animations */
}

.guest-menu__button {
    background: white;
    border: none;
    cursor: pointer;
    color: #444;
    width: calc(13.8 * var(--element-width));
    height: calc(13.8 * var(--element-width));
    border-radius: 50%;
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 calc(0.4 * var(--element-width)) calc(1.8 * var(--element-width)) rgba(0,0,0,0.15);
    transition: opacity 1.5s ease;
    opacity: 0;
    pointer-events: none;
}

.guest-menu__button.visible {
    opacity: 1;
    pointer-events: auto;
}

.guest-menu__button:active {
    opacity: var(--btn-active-opacity);
    transition: none;
}

.guest-menu__button-icon {
    width: calc(6.8 * var(--element-width));
    height: calc(6.8 * var(--element-width));
}

.guest-menu__dropdown {
    position: absolute;
    top: calc(15.2 * var(--element-width));
    right: 0;
    background: white;
    border-radius: calc(2.8 * var(--element-width));
    box-shadow: 0 calc(1 * var(--element-width)) calc(5 * var(--element-width)) rgba(0,0,0,0.15);
    width: calc(45.8 * var(--element-width));
    overflow: hidden;
    display: none;
    flex-direction: column;
    animation: uiFadeIn 0.2s ease-out;
}

.guest-menu__dropdown--show {
    display: flex;
}

.guest-menu__dropdown-item {
    padding: calc(2.8 * var(--element-width)) calc(4.6 * var(--element-width));
    border: none;
    background: none;
    text-align: left;
    font-family: 'Poppins', sans-serif;
    font-size: calc(3.8 * var(--element-width));
    color: #555;
    cursor: pointer;
    transition: background 0.2s;
    display: flex;
    align-items: center;
    gap: calc(2.8 * var(--element-width));
    width: 100%;
    min-height: calc(11.2 * var(--element-width));
}

.guest-menu__dropdown-item--logged-out span {
    line-height: normal;
    margin: 0;
}

.guest-menu__dropdown-item:active {
    background-color: #e9ecef;
    transition: none;
}

.guest-menu__dropdown-item-icon {
    width: calc(4.6 * var(--element-width));
    height: calc(4.6 * var(--element-width));
    opacity: 0.7;
    display: block;
    flex-shrink: 0;
}

/* --------------------------------
   3.3 User Menu
   -------------------------------- */
.user-menu {
    position: absolute;
    top: calc(4.6 * var(--element-width));
    right: calc(4.6 * var(--element-width));
    z-index: 100;
    display: none;
    align-items: center;
    gap: calc(2.2 * var(--element-width));
    transform: translateZ(0); /* GPU acceleration to prevent shifting during 3D transform animations */
}

.user-menu__button {
    border: none;
    cursor: pointer;
    background: transparent;
    padding: 0;
    width: calc(13.8 * var(--element-width));
    height: calc(13.8 * var(--element-width));
    display: flex;
    align-items: center;
    justify-content: center;
    transition: opacity 1.5s ease;
    opacity: 0;
    pointer-events: none;
}

.user-menu__button.visible {
    opacity: 1;
    pointer-events: auto;
}

.user-menu__button:active {
    opacity: var(--btn-active-opacity);
    transition: none;
}

.user-menu__dropdown {
    position: absolute;
    top: calc(15.2 * var(--element-width));
    right: 0;
    background: white;
    border-radius: calc(2.8 * var(--element-width));
    box-shadow: 0 calc(1 * var(--element-width)) calc(5 * var(--element-width)) rgba(0,0,0,0.15);
    width: calc(45.8 * var(--element-width));
    overflow: hidden;
    display: none;
    flex-direction: column;
    animation: uiFadeIn 0.2s ease-out;
}

.user-menu__dropdown--show {
    display: flex;
}

.user-menu__dropdown-item {
    padding: calc(2.8 * var(--element-width)) calc(4.6 * var(--element-width));
    border: none;
    background: none;
    text-align: left;
    font-family: 'Poppins', sans-serif;
    font-size: calc(3.8 * var(--element-width));
    color: #555;
    cursor: pointer;
    transition: background 0.2s;
    display: flex;
    align-items: center;
    gap: calc(2.8 * var(--element-width));
    width: 100%;
    min-height: calc(11.2 * var(--element-width));
}

.user-menu__dropdown-item span {
    line-height: normal;
    margin: 0;
}

.user-menu__dropdown-item:active {
    background-color: #e9ecef;
    transition: none;
}

.user-menu__dropdown-item-icon {
    width: calc(4.6 * var(--element-width));
    height: calc(4.6 * var(--element-width));
    opacity: 0.7;
    display: block;
    flex-shrink: 0;
}

.user-menu__dropdown-divider {
    height: 1px;
    background-color: #eee;
    margin: 0;  
}

.avatar {
    --avatar-size: calc(10.8 * var(--element-width));
    --avatar-text-size: calc(var(--avatar-size) * 0.5);
    
    width: var(--avatar-size);
    height: var(--avatar-size);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: transform 0.2s, box-shadow 0.2s;
    box-shadow: 0 calc(0.4 * var(--element-width)) calc(1.8 * var(--element-width)) rgba(0, 0, 0, 0.15);
    background: linear-gradient(135deg, var(--avatar-color, #74b9ff) 0%, var(--avatar-color-light, #5fa8f5) 100%);
}

.avatar--user-button {
    --avatar-size: calc(13.8 * var(--element-width));
    transition: opacity 0.3s ease;
}

.avatar--user-button:active {
    transform: scale(0.98);
    transition: none;
}

.avatar--profile-modal {
    --avatar-size: calc(21.4 * var(--element-width));
}

.avatar--profile-modal:active {
    transform: scale(0.98);
    transition: none;
}

.avatar__letter {
    font-size: var(--avatar-text-size);
    font-family: 'Times New Roman', Times, serif;
    font-weight: 600;
    color: #444;
    user-select: none;
}

/* ========================================
   4. WELCOME SCREEN
   ======================================== */
/* Welcome screen styles moved to inline CSS in <head> for instant rendering */

/* ========================================
   5. QUIZ SCREEN
   ======================================== */
/* --------------------------------
   5.1 Main Container
   -------------------------------- */
.quiz-screen {
    --question-padding-vertical: calc(2.2 * var(--element-width));
    --question-padding-horizontal: calc(4.6 * var(--element-width));
    
    width: 100%;
    height: 100%;
    margin: 0 auto;
    position: relative;
    box-sizing: border-box;
    overflow: hidden;
}

/* --------------------------------
   5.2 Results Button
   -------------------------------- */
.quiz-screen__show-results {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 10%;
    width: 100%;
    padding: 0 calc(4.6 * var(--element-width));
    box-sizing: border-box;
    position: absolute;
    bottom: calc(50% + var(--question-container-height, 0px) / 2 + var(--question-padding-vertical));
}

.quiz-screen__show-results-btn {
    background: linear-gradient(180deg, #42a5f5 0%, #1e88e5 100%);
    color: white;
    border: none;
    padding: calc(3.3 * var(--element-width)) calc(6.6 * var(--element-width));
    font-size: calc(4.6 * var(--element-width));
    font-weight: bold;
    border-radius: calc(50 * var(--element-width));
    cursor: pointer;
    box-shadow: 
        0 calc(0.8 * var(--element-width)) calc(1.4 * var(--element-width)) rgba(0, 0, 0, 0.1),
        0 calc(1.8 * var(--element-width)) calc(4.6 * var(--element-width)) rgba(0, 0, 0, 0.15);
    transition: all 0.15s ease;
    font-family: 'Montserrat', sans-serif;
    transform: translateY(0);
}

.quiz-screen__show-results-btn:active {
    background: linear-gradient(180deg, #1e88e5 0%, #1565c0 100%);
    box-shadow: 
        0 calc(0.4 * var(--element-width)) calc(0.8 * var(--element-width)) rgba(0, 0, 0, 0.15),
        0 calc(0.8 * var(--element-width)) calc(2 * var(--element-width)) rgba(0, 0, 0, 0.2);
    transform: translateY(calc(0.6 * var(--element-width)));
    transition: none;
}

/* --------------------------------
   5.3 Question Container
   -------------------------------- */
.quiz-screen__questions {
    display: flex;
    flex-direction: column;
    align-items: center;
    position: absolute;
    top: 50%;
    left: 0;
    right: 0;
    transform: translateY(-50%);
    width: 100%;
    height: var(--question-container-height, auto);
}

.quiz-screen__content {
    display: flex;
    width: 100%;
    overflow-x: auto;
    scroll-snap-type: x mandatory;
    scroll-behavior: smooth;
    scrollbar-width: none;
    -ms-overflow-style: none;
    gap: 0; 
    overflow-y: hidden; 
    align-items: center;
    padding-top: var(--question-padding-vertical);
    padding-bottom: var(--question-padding-vertical);
}

.quiz-screen__content::-webkit-scrollbar { 
    display: none; 
}

.quiz-screen__card-wrapper {
    position: relative;
    width: 100%;
    flex: 0 1 auto;
    min-height: 0;
}

/* --------------------------------
   5.4 Question Blocks
   -------------------------------- */
.quiz-screen__question { 
    background: white; 
    padding: calc(4.6 * var(--element-width)); 
    border: 1px solid #e0e0e0; 
    border-radius: calc(2.8 * var(--element-width)); 
    width: 100%;
    box-sizing: border-box; 
    max-height: 100%; 
    overflow-y: auto; 
    position: relative;
    word-wrap: break-word;
    overflow-wrap: break-word;
}

.quiz-screen__question h3 { 
    margin: 0 0 calc(3.4 * var(--element-width)) 0; 
    font-size: calc(5.2 * var(--element-width)); 
    line-height: 1.4; 
    color: #000000;
}

.quiz-screen__question.locked > *:not(.quiz-screen__lock-overlay) {
    filter: blur(5px);
    pointer-events: none;
    user-select: none;
}

.quiz-screen__question.answered label .quiz-screen__percent-bar { 
    opacity: 1; 
}

.quiz-screen__question.answered label:not(.correct-choice):not(.wrong-choice) { 
    color: #555; 
}

.quiz-screen__question.easy { 
    border-top: calc(1.4 * var(--element-width)) solid rgba(39, 174, 96, 0.75); 
    box-shadow: calc(0.6 * var(--element-width)) calc(0.6 * var(--element-width)) calc(2.8 * var(--element-width)) rgba(0, 0, 0, 0.1);
}

.quiz-screen__question.medium { 
    border-top: calc(1.4 * var(--element-width)) solid rgba(33, 150, 243, 0.75); 
    box-shadow: calc(0.6 * var(--element-width)) calc(0.6 * var(--element-width)) calc(2.8 * var(--element-width)) rgba(0, 0, 0, 0.1);
}

.quiz-screen__question.hard { 
    border-top: calc(1.4 * var(--element-width)) solid rgba(192, 57, 43, 0.75); 
    box-shadow: calc(0.6 * var(--element-width)) calc(0.6 * var(--element-width)) calc(2.8 * var(--element-width)) rgba(0, 0, 0, 0.1);
}

.quiz-screen__question.impossible { 
    border-top: calc(1.4 * var(--element-width)) solid rgba(0, 0, 0, 0.75); 
    box-shadow: calc(0.6 * var(--element-width)) calc(0.6 * var(--element-width)) calc(2.8 * var(--element-width)) rgba(0, 0, 0, 0.1);
}

.quiz-screen__lock-overlay {
    position: absolute;
    top: 0; 
    left: 0; 
    width: 100%; 
    height: 100%;
    display: flex; 
    flex-direction: column;
    align-items: center; 
    justify-content: center;
    z-index: 10;
    background: rgba(255, 255, 255, 0.5);
    border-radius: calc(2.8 * var(--element-width));
}

.quiz-screen__lock-box {
    background: white;
    padding: calc(5.8 * var(--element-width)) calc(4.6 * var(--element-width));
    border-radius: calc(3.8 * var(--element-width));
    box-shadow: 0 calc(2.2 * var(--element-width)) calc(6.8 * var(--element-width)) rgba(0,0,0,0.15);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    border: 1px solid #f0f0f0;
    width: calc(100% - calc(9.2 * var(--element-width)));
    box-sizing: border-box;
}

.quiz-screen__lock-icon { 
    font-size: calc(11.2 * var(--element-width)); 
    margin-bottom: calc(3.4 * var(--element-width)); 
    line-height: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    width: calc(11.2 * var(--element-width));
    height: calc(11.2 * var(--element-width));
}

.quiz-screen__lock-icon svg {
    width: 100%;
    height: 100%;
}

.quiz-screen__lock-text { 
    font-size: calc(3.8 * var(--element-width)); 
    font-weight: bold; 
    color: #555; 
    text-align: center; 
    line-height: 1.4; 
}

/* --------------------------------
   5.5 Answer Options
   -------------------------------- */
.quiz-screen__options input[type="radio"] { 
    display: none; 
}

.quiz-screen__options label {
    display: block; 
    margin: calc(2 * var(--element-width)) 0; 
    cursor: pointer; 
    padding: calc(2.8 * var(--element-width)) calc(3.4 * var(--element-width));
    border-radius: calc(2 * var(--element-width)); 
    background: #fff; 
    border: 2px solid #eef2f7;
    position: relative; 
    overflow: hidden; 
    transition: all 0.2s;
    font-size: calc(3.6 * var(--element-width));
    color: #333;
}

.quiz-screen__options label.selected:not(.correct-choice):not(.wrong-choice) {
    background-color: #f8fbff; 
    border-color: #3498db; 
    transform: none;
    box-shadow: none;
}

.quiz-screen__options label.disabled { 
    pointer-events: none; 
}

.quiz-screen__options label.correct-choice { 
    border-color: transparent !important;
    color: #155724 !important;
    box-shadow: inset 0 0 calc(1.4 * var(--element-width)) rgba(39, 174, 96, 0.4) !important;
}

.quiz-screen__options label.correct-choice .quiz-screen__percent-bar { 
    background-color: #d4edda !important; 
}

.quiz-screen__options label.wrong-choice { 
    border-color: transparent !important;
    color: #721c24 !important;
    box-shadow: inset 0 0 calc(1.4 * var(--element-width)) rgba(192, 57, 43, 0.4) !important;
}

.quiz-screen__options label.wrong-choice .quiz-screen__percent-bar { 
    background-color: #f8d7da !important; 
}

.quiz-screen__answer-text { 
    position: relative; 
    z-index: 2; 
    display: flex; 
    justify-content: space-between; 
}

.quiz-screen__percent-bar { 
    position: absolute; 
    top: 0; 
    left: 0; 
    height: 100%; 
    width: 0%; 
    z-index: 1; 
    transition: width 0.5s ease-out; 
    background-color: #e9ecef; 
    opacity: 0; 
}

.quiz-screen__feedback-msg { 
    font-size: calc(3.4 * var(--element-width)); 
    font-weight: bold; 
    margin-top: calc(2.2 * var(--element-width)); 
    display: block; 
    text-align: center; 
    min-height: calc(5.8 * var(--element-width));
}

/* --------------------------------
   5.6 Action Buttons
   -------------------------------- */
.quiz-screen__actions {
    display: flex;
    justify-content: center;
    width: 100%;
    padding: 0 var(--question-padding-horizontal);
    box-sizing: border-box;
    position: absolute;
    top: calc(50% + var(--question-container-height, 0px) / 2 + var(--question-padding-vertical) / 2);
}

.quiz-screen__actions-buttons {
    display: flex;
    gap: calc(2 * var(--element-width));
    width: 100%;
}

.quiz-screen__reference-button,
.quiz-screen__next-button,
.quiz-screen__prev-button {
    display: flex;
    align-items: center;
    gap: calc(1 * var(--element-width));
    height: calc(10 * var(--element-width));
    background: white;
    color: #444;
    border: 1px solid #e0e0e0;
    border-radius: calc(2.8 * var(--element-width));
    font-size: calc(3.4 * var(--element-width));
    font-weight: bold;
    cursor: pointer;
    justify-content: center;
    box-shadow: calc(0.4 * var(--element-width)) calc(0.4 * var(--element-width)) calc(2.8 * var(--element-width)) rgba(0, 0, 0, 0.1);
    transition: all 0.2s ease;
}

.quiz-screen__reference-button:not(.visible),
.quiz-screen__next-button:not(.visible),
.quiz-screen__prev-button:not(.visible) {
    display: none;
}

.quiz-screen__reference-button {
    flex: 1;
    gap: calc(1.5 * var(--element-width));
}

.quiz-screen__prev-button {
    width: 22%;
    gap: calc(0.5 * var(--element-width));
}

.quiz-screen__next-button {
    width: 22%;
    gap: calc(0.5 * var(--element-width));
}

.quiz-screen__reference-button:active,
.quiz-screen__next-button:active,
.quiz-screen__prev-button:active {
    opacity: var(--btn-active-opacity);
    transition: none;
}

.quiz-screen__reference-button svg,
.quiz-screen__next-button svg,
.quiz-screen__prev-button svg {
    flex-shrink: 0;
    width: calc(5 * var(--element-width));
    height: calc(5 * var(--element-width));
    display: block;
}

.quiz-screen__reference-button svg {
    width: calc(4.5 * var(--element-width));
    height: calc(4.5 * var(--element-width));
}

.quiz-screen__prev-button svg {
    margin-left: calc(-2.2 * var(--element-width));
}

.quiz-screen__next-button svg {
    margin-right: calc(-2.2 * var(--element-width));
}

/* --------------------------------
   5.7 Difficulty Dots
   -------------------------------- */
.quiz-screen__difficulty-dots { 
    display: flex; 
    justify-content: center; 
    gap: calc(1.4 * var(--element-width)); 
    flex-wrap: nowrap;
    position: absolute;
    bottom: calc(2.2 * var(--element-width));
    left: 50%;
    transform: translateX(-50%);
    z-index: 10;
}

.quiz-screen__difficulty-dot { 
    font-size: calc(2.6 * var(--element-width)); 
    text-transform: uppercase; 
    font-weight: bold; 
    font-family: 'Montserrat', sans-serif;
    padding: calc(1.4 * var(--element-width)) calc(2.2 * var(--element-width));
    border-radius: calc(2 * var(--element-width)); 
    color: white; 
    cursor: pointer;
    opacity: 0.4; 
    transition: all 0.3s;
    display: flex;
    align-items: center;
    justify-content: center;
}

.quiz-screen__difficulty-dot-text {
    display: block;
}

.quiz-screen__difficulty-dot--active { 
    opacity: 1; 
    transform: scale(1.05); 
}

.quiz-screen__difficulty-dot--easy { 
    background-color: #27ae60; 
}

.quiz-screen__difficulty-dot--medium { 
    background-color: #2196f3; 
}

.quiz-screen__difficulty-dot--hard { 
    background-color: #c0392b; 
}

.quiz-screen__difficulty-dot--impossible { 
    background-color: #000000; 
}

/* --------------------------------
   5.8 Card Flip Animation
   -------------------------------- */
.quiz-screen__card {
    perspective: 1000px;
    width: 100%;
    min-width: calc(100% - 2 * var(--question-padding-horizontal));
    max-width: calc(100% - 2 * var(--question-padding-horizontal));
    margin: 0 var(--question-padding-horizontal);
    padding: 0;
    scroll-snap-align: center;
    flex-shrink: 0;
}

.quiz-screen__card-flipper {
    width: 100%;
    overflow: visible;
}

.quiz-screen__card-inner {
    position: relative;
    width: 100%;
    transition: transform 0.6s;
    transform-style: preserve-3d;
}

.quiz-screen__card-flipper--flipped .quiz-screen__card-inner {
    transform: rotateY(180deg);
}

.quiz-screen__card-front,
.quiz-screen__card-back {
    width: 100%;
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
}

.quiz-screen__card-front {
    transform: rotateY(0deg);
}

.quiz-screen__card-back {
    position: absolute;
    top: 0;
    left: 0;
    height: 100%;
    transform: rotateY(180deg);
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
}

/* --------------------------------
   5.9 Reference Content
   -------------------------------- */
.quiz-screen__reference {
    padding: calc(4.6 * var(--element-width));
    background: linear-gradient(135deg, #f8f4ef 0%, #f0e8dc 100%);
    border-left: 4px solid #8d6e63;
    border-radius: calc(2 * var(--element-width));
    opacity: 0;
    transition: opacity 0.5s ease-in;
    min-height: calc(91.4 * var(--element-width));
    display: flex;
    flex-direction: column;
}

.quiz-screen__reference--visible {
    opacity: 1;
}

.quiz-screen__reference-header {
    display: flex;
    align-items: center;
    gap: calc(2 * var(--element-width));
    font-size: calc(3.4 * var(--element-width));
    margin-top: calc(2.2 * var(--element-width));
}

.quiz-screen__reference-header svg {
    flex-shrink: 0;
    color: #333;
    width: calc(6 * var(--element-width));
    height: calc(6 * var(--element-width));
    display: block;
}

.quiz-screen__reference-header h3 {
    margin: 0;
    font-size: calc(5.8 * var(--element-width));
    font-weight: 700;
    color: #333;
    line-height: 1;
}

.quiz-screen__reference-label {
    margin: 0 0 calc(3.8 * var(--element-width)) 0;
    color: #4e342e;
    font-size: calc(1.4 * var(--element-width));
    font-style: italic;
}

.quiz-screen__reference-close-button {
    padding: calc(2 * var(--element-width)) calc(3.8 * var(--element-width));
    background: #8d6e63;
    color: white;
    border: none;
    border-radius: calc(1.4 * var(--element-width));
    font-size: calc(3.4 * var(--element-width));
    cursor: pointer;
    transition: background 0.3s ease;
}

.quiz-screen__reference-close-button:active {
    transform: scale(0.98);
    transition: none;
}

.quiz-screen__reference-display {
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    height: 100%;
    gap: calc(3.4 * var(--element-width));
    overflow: auto;
}

.quiz-screen__reference-text {
    font-size: calc(3.8 * var(--element-width));
    line-height: 1.6;
    color: #333;
    margin: 0;
    font-style: italic;
    text-align: left;
}
.quiz-screen__card-back-empty {
    text-align: center;
    padding: calc(4.6 * var(--element-width));
}

.quiz-screen__card-back-button {
    background: #795548;
    color: white;
    border: none;
    border-radius: calc(2 * var(--element-width));
    padding: calc(2.8 * var(--element-width)) calc(5.8 * var(--element-width));
    font-size: calc(4.2 * var(--element-width));
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: calc(2 * var(--element-width));
    margin: 0 auto;
}

.quiz-screen__card-back-button:active {
    transform: scale(0.98);
    transition: none;
}

.quiz-screen__card-back-button svg {
    width: calc(4.6 * var(--element-width));
    height: calc(4.6 * var(--element-width));
}

/* ========================================
   6. MODALS
   ======================================== */
/* --------------------------------
   6.1 Modal - Stacked (Shared)
   -------------------------------- */
.stacked-modal__overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 10000;
    display: flex;
    align-items: flex-end;
    justify-content: center;
    pointer-events: none;
}

.stacked-modal__overlay--active {
    pointer-events: all;
}

.stacked-modal__overlay--no-scroll {
    overflow: hidden;
}

.stacked-modal__overlay--no-scroll .stacked-modal__content {
    overflow-y: scroll;
}

.stacked-modal__overlay--no-scroll .stacked-modal__content {
    pointer-events: none;
}

.stacked-modal__content--blurred {
    filter: blur(3px);
    transition: filter 0.2s ease;
}

.stacked-modal__sheet {
    background: white;
    width: 100%;
    max-width: calc(100 * var(--app-width));
    border-radius: calc(3.8 * var(--element-width)) calc(3.8 * var(--element-width)) 0 0;
    box-shadow: 0 calc(-1.8 * var(--element-width)) calc(7.4 * var(--element-width)) rgba(0, 0, 0, 0.25);
    padding: 0;
    transform: translateY(100%);
    transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    height: 92dvh;
    overflow: hidden;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
}

.stacked-modal__overlay--active .stacked-modal__sheet {
    transform: translateY(0);
}

.stacked-modal__header {
    display: flex;
    align-items: center;
    justify-content: center;
    height: calc(11.2 * var(--element-width));
    padding: 0 calc(5.8 * var(--element-width));
    border-bottom: 1px solid #555;
    position: relative;
    flex-shrink: 0;
}

.stacked-modal__header-text {
    font-size: calc(6.7 * var(--element-width));
    font-weight: 700;
    color: #222;
    margin: 0;
    line-height: 1;
    font-family: 'Times New Roman', Times, serif;
    font-style: italic;
}

.stacked-modal__close {
    position: absolute;
    right: calc(1.4 * var(--element-width));
    top: 50%;
    transform: translateY(-50%);
    background: none;
    border: none;
    color: #555;
    cursor: pointer;
    width: calc(8.2 * var(--element-width));
    height: calc(8.2 * var(--element-width));
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    transition: background-color 0.2s;
    padding: 0;
}

.stacked-modal__close svg {
    width: calc(5.8 * var(--element-width));
    height: calc(5.8 * var(--element-width));
}

.stacked-modal__close:active {
    transform: translateY(-50%) scale(0.9);
    transition: none;
}

.stacked-modal__content {
    display: flex;
    flex-direction: column;
    overflow-y: auto;
    flex: 1;
    box-sizing: border-box;
    scrollbar-width: none;
    -ms-overflow-style: none;
}

.stacked-modal__content::-webkit-scrollbar {
    display: none;
}

/* --------------------------------
   6.2 Modal - Auth
   -------------------------------- */
.auth-modal__content {
    align-items: center;
    text-align: center;
    width: 100%;
    max-width: calc(100 * var(--app-width));
    padding: calc(6.8 * var(--element-width));
    margin: 0 auto;
}

.auth-modal__title {
    font-size: calc(6.6 * var(--element-width));
    font-weight: 700;
    color: black;
    margin: 0 0 calc(3.8 * var(--element-width)) 0;
    line-height: 1.2;
}

.auth-modal__subtitle {
    font-size: calc(3.4 * var(--element-width));
    color: black;
    line-height: 1.5;
    margin: 0 0 calc(7.4 * var(--element-width)) 0;
}

.auth-modal__subtitle a {
    color: black;
    text-decoration: underline;
}

.auth-modal__label {
    display: block;
    font-size: calc(3.4 * var(--element-width));
    font-weight: 600;
    color: black;
    text-align: left;
    margin-bottom: calc(1.4 * var(--element-width));
}

.auth-modal__input-wrapper {
    position: relative;
    width: 100%;
    margin-bottom: calc(2.8 * var(--element-width));
}

.auth-modal__input {
    width: 100%;
    padding: calc(3.4 * var(--element-width)) calc(3.8 * var(--element-width));
    font-size: max(16px, calc(3.8 * var(--element-width)));
    border: 1px solid #555;
    border-radius: calc(2 * var(--element-width));
    background: white;
    color: black;
    box-sizing: border-box;
    margin-bottom: calc(2.8 * var(--element-width));
    transition: border-color 0.2s;
}

.auth-modal__input-wrapper .auth-modal__input {
    margin-bottom: 0;
}

.auth-modal__input:focus {
    outline: none;
    border-color: #8b5a3c;
}

.auth-modal__input-error {
    position: absolute;
    right: calc(2.8 * var(--element-width));
    top: 50%;
    transform: translateY(-50%);
    color: #dc3545;
    display: flex;
    align-items: center;
    justify-content: center;
    pointer-events: none;
    animation: uiShake 0.4s;
}

.auth-modal__input-error svg {
    width: calc(5.2 * var(--element-width));
    height: calc(5.2 * var(--element-width));
}

@keyframes uiShake {
    0%, 100% { transform: translateY(-50%) translateX(0); }
    25% { transform: translateY(-50%) translateX(-5px); }
    75% { transform: translateY(-50%) translateX(5px); }
}

.auth-modal__input:-webkit-autofill,
.auth-modal__input:-webkit-autofill:hover,
.auth-modal__input:-webkit-autofill:focus,
.auth-modal__input:-webkit-autofill:active {
    -webkit-box-shadow: 0 0 0 calc(6.8 * var(--element-width)) white inset !important;
    box-shadow: 0 0 0 calc(6.8 * var(--element-width)) white inset !important;
    -webkit-text-fill-color: black !important;
}

.auth-modal__btn--primary {
    width: 100%;
    padding: calc(3.4 * var(--element-width)) calc(3.8 * var(--element-width));
    font-size: calc(3.8 * var(--element-width));
    font-weight: 600;
    background: black;
    color: white;
    border: none;
    border-radius: calc(2 * var(--element-width));
    cursor: pointer;
    transition: transform 0.2s, box-shadow 0.2s, margin-top 1s ease;
    box-shadow: 0 calc(0.4 * var(--element-width)) calc(1.8 * var(--element-width)) rgba(0, 0, 0, 0.15);
    height: calc(11.4 * var(--element-width));
    display: flex;
    align-items: center;
    justify-content: center;
}

.auth-modal__btn--primary:active {
    transform: translateY(0);
    background: #4a4a4a;
    box-shadow: 0 calc(0.2 * var(--element-width)) calc(1 * var(--element-width)) rgba(0, 0, 0, 0.2);
    transition: none;
}

.auth-modal__btn--primary.auth-modal__btn--loading {
    background: #4a4a4a;
}

.auth-modal__email-section {
    width: 100%;
    display: flex;
    flex-direction: column;
}

.auth-modal__auth-container {
    width: 100%;
    display: flex;
    flex-direction: column;
    margin-top: 0;
    transition: opacity 0.3s ease;
}

.auth-modal__divider {
    width: 100%;
    display: flex;
    align-items: center;
    margin: calc(7.4 * var(--element-width)) 0;
    gap: calc(3.8 * var(--element-width));
    transition: opacity 400ms ease;
    opacity: 1;
}

.auth-modal__divider--fade-out {
    opacity: 0;
    pointer-events: none;
}

.auth-modal__divider::before,
.auth-modal__divider::after {
    content: '';
    flex: 1;
    height: 1px;
    background: #555;
}

.auth-modal__divider span {
    font-size: calc(3.4 * var(--element-width));
    font-weight: 600;
    color: #555;
}

.auth-modal__social-btns {
    width: 100%;
    display: flex;
    flex-direction: column;
    gap: calc(2.8 * var(--element-width));
    transition: opacity 400ms ease;
    opacity: 1;
}

.auth-modal__social-btns--fade-out {
    opacity: 0;
    pointer-events: none;
}

.auth-modal__btn--outline {
    width: 100%;
    padding: calc(3.4 * var(--element-width)) calc(3.8 * var(--element-width));
    font-size: calc(3.8 * var(--element-width));
    font-weight: 600;
    background: white;
    color: black;
    border: 1px solid #555;
    border-radius: calc(2 * var(--element-width));
    cursor: pointer;
    transition: background-color 0.2s, transform 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: calc(2.8 * var(--element-width));
}

.auth-modal__btn--outline:active {
    transform: translateY(0);
    background-color: #d0d0d0;
    transition: none;
}

.auth-modal__btn--outline.auth-modal__btn--loading {
    background-color: #d0d0d0;
}

.auth-modal__btn--outline svg {
    width: calc(4.6 * var(--element-width));
    height: calc(4.6 * var(--element-width));
    flex-shrink: 0;
}

.auth-modal__spinner {
    display: inline-block;
    width: calc(4.2 * var(--element-width));
    height: calc(4.2 * var(--element-width));
    border: 2px solid rgba(0, 0, 0, 0.2);
    border-top-color: black;
    border-radius: 50%;
    animation: uiSpinnerRotation 0.6s linear infinite;
}

.auth-modal__btn--primary .auth-modal__spinner {
    border: 2px solid rgba(255, 255, 255, 0.3);
    border-top-color: white;
}

.auth-modal__btn--outline.auth-modal__btn--loading .auth-modal__spinner {
    border: 2px solid rgba(0, 0, 0, 0.2);
    border-top-color: black;
}

/* --------------------------------
   6.3 Modal - Profile
   -------------------------------- */
.profile-modal__content {
    align-items: center;
    text-align: center;
    width: 100%;
    max-width: calc(100 * var(--app-width));
    padding: calc(6.8 * var(--element-width));
    margin: 0 auto;
}

.profile-modal__avatar-section {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-bottom: calc(5.8 * var(--element-width));
}

.profile-modal__avatar-wrapper {
    position: relative;
    margin-bottom: calc(1.8 * var(--element-width));
}

.profile-modal__avatar-edit-badge {
    position: absolute;
    bottom: 2px;
    right: 2px;
    width: calc(6.6 * var(--element-width));
    height: calc(6.6 * var(--element-width));
    background: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 calc(0.4 * var(--element-width)) calc(1.4 * var(--element-width)) rgba(0, 0, 0, 0.15);
}

.profile-modal__avatar-edit-badge svg {
    width: calc(3.2 * var(--element-width));
    height: calc(3.2 * var(--element-width));
    color: #555;
}

.profile-modal__avatar-hint {
    font-size: calc(3.2 * var(--element-width));
    color: #666;
    margin: 0;
}

.profile-modal__color-palette {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: calc(2.8 * var(--element-width));
    padding: calc(4.6 * var(--element-width));
    background: #f5f5f5;
    border-radius: calc(2.8 * var(--element-width));
    margin-bottom: calc(5.8 * var(--element-width));
    width: 100%;
    margin-left: auto;
    margin-right: auto;
    box-sizing: border-box;
}

.profile-modal__color-swatch {
    width: calc(9.2 * var(--element-width));
    height: calc(9.2 * var(--element-width));
    border-radius: 50%;
    cursor: pointer;
    transition: transform 0.2s, box-shadow 0.2s;
    border: calc(0.8 * var(--element-width)) solid transparent;
}

.profile-modal__color-swatch:active {
    transform: scale(0.95);
    transition: none;
}

.profile-modal__color-swatch--selected {
    border-color: black;
    transform: scale(1.15);
}

.profile-modal__info-section {
    display: flex;
    flex-direction: column;
    gap: calc(4.6 * var(--element-width));
    width: 100%;
    margin-top: calc(5.8 * var(--element-width));
}

.profile-modal__field {
    display: flex;
    flex-direction: column;
    gap: calc(1.4 * var(--element-width));
}

.profile-modal__name-container {
    display: flex;
    flex-direction: column;
    gap: calc(2.2 * var(--element-width));
}

.profile-modal__edit-btn {
    position: absolute;
    right: calc(2.8 * var(--element-width));
    top: 50%;
    transform: translateY(-50%);
    background: none;
    border: none;
    cursor: pointer;
    padding: calc(1.4 * var(--element-width));
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: calc(1.2 * var(--element-width));
    color: #6c757d;
    transition: all 0.2s ease;
    opacity: 0.7;
    z-index: 1;
}

.profile-modal__edit-btn svg {
    width: calc(4.2 * var(--element-width));
    height: calc(4.2 * var(--element-width));
}

.profile-modal__edit-btn:active {
    transform: translateY(-50%) scale(0.98);
    transition: none;
}

.profile-modal__edit-container {
    display: flex;
    flex-direction: column;
    gap: calc(2.2 * var(--element-width));
    margin-top: calc(2 * var(--element-width));
    width: 100%;
    max-width: 100%;
}

.profile-modal__input-wrapper {
    position: relative;
    width: 100%;
}

.profile-modal__input {
    width: 100%;
    max-width: 100%;
    padding: calc(2.2 * var(--element-width)) calc(2.8 * var(--element-width));
    border: 2px solid #e1e4e8;
    border-radius: calc(2 * var(--element-width));
    font-size: max(16px, calc(3.4 * var(--element-width)));
    font-weight: 500;
    color: #24292e;
    transition: border-color 0.2s ease;
    box-sizing: border-box;
}

.profile-modal__input:focus {
    outline: none;
    border-color: #74b9ff;
}

.profile-modal__input-error {
    position: absolute;
    right: calc(2.8 * var(--element-width));
    top: 50%;
    transform: translateY(-50%);
    color: #dc3545;
    display: flex;
    align-items: center;
    justify-content: center;
    pointer-events: none;
    animation: uiShake 0.4s;
}

.profile-modal__input-error svg {
    width: calc(5.2 * var(--element-width));
    height: calc(5.2 * var(--element-width));
}

.profile-modal__edit-actions {
    display: flex;
    gap: calc(2 * var(--element-width));
}

.profile-modal__action-btn {
    flex: 1;
    padding: calc(2 * var(--element-width)) calc(3.8 * var(--element-width));
    border: none;
    border-radius: calc(1.4 * var(--element-width));
    font-size: calc(3.4 * var(--element-width));
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
}

.profile-modal__action-btn--save {
    background: #74b9ff;
    color: white;
}

.profile-modal__action-btn--save:active {
    transform: scale(0.98);
    transition: none;
}

.profile-modal__action-btn--cancel {
    background: #e1e4e8;
    color: #24292e;
}

.profile-modal__action-btn--cancel:active {
    transform: scale(0.98);
    transition: none;
}

.profile-modal__label {
    font-size: calc(3.4 * var(--element-width));
    font-weight: 600;
    color: #555;
}

.profile-modal__value {
    font-size: calc(3.8 * var(--element-width));
    color: black;
    padding: calc(2.8 * var(--element-width)) calc(3.8 * var(--element-width));
    background: #f5f5f5;
    border-radius: calc(2 * var(--element-width));
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    flex: 1;
    position: relative;
    text-decoration: none !important;
    -webkit-text-decoration: none !important;
}

#profile-email {
    text-decoration: none !important;
}

#profile-email,
#profile-email * {
    text-decoration: none !important;
    border-bottom: none !important;
    -webkit-text-decoration: none !important;
}

.profile-modal__value a {
    color: black;
    text-decoration: none !important;
    pointer-events: none;
}

#profile-display-name-text {
    width: 100%;
    text-align: center;
    position: relative;
    z-index: 0;
}

/* Friends Section */
.profile-modal__friends-section {
    margin-top: calc(4 * var(--element-width));
}

.profile-modal__share-btn {
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: calc(2 * var(--element-width));
    padding: calc(3.2 * var(--element-width)) calc(4 * var(--element-width));
    background: #000;
    color: white;
    border: none;
    border-radius: calc(2 * var(--element-width));
    font-size: calc(3.8 * var(--element-width));
    font-weight: 600;
    cursor: pointer;
    margin-top: calc(2 * var(--element-width));
    transition: opacity 0.2s;
}

.profile-modal__share-btn svg {
    width: calc(4.8 * var(--element-width));
    height: calc(4.8 * var(--element-width));
}

.profile-modal__share-btn:active {
    opacity: var(--btn-active-opacity);
    transition: none;
}

.profile-modal__friends-list {
    margin-top: calc(3 * var(--element-width));
    display: flex;
    flex-direction: column;
    gap: calc(2 * var(--element-width));
}

.profile-modal__friend-item {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: calc(2.8 * var(--element-width)) calc(3.8 * var(--element-width));
    background: #f5f5f5;
    border-radius: calc(2 * var(--element-width));
    font-size: calc(3.8 * var(--element-width));
    color: #333;
}

.profile-modal__friend-item-name {
    text-align: center;
}

.profile-modal__friend-remove-btn {
    position: absolute;
    right: calc(3.8 * var(--element-width));
    padding: calc(1.4 * var(--element-width)) calc(2.2 * var(--element-width));
    background: transparent;
    color: #d64436;
    border: none;
    border-radius: calc(1 * var(--element-width));
    font-size: calc(3 * var(--element-width));
    font-weight: 500;
    cursor: pointer;
    transition: opacity 0.15s ease, background 0.2s ease, transform 0.1s ease;
}

/* Initial state: Ã— icon */
.profile-modal__friend-remove-btn[data-confirm-stage="0"] {
    font-size: calc(5 * var(--element-width));
    line-height: 1;
    padding: calc(0.5 * var(--element-width)) calc(1.5 * var(--element-width));
}

.profile-modal__friend-remove-btn[data-confirm-stage="0"]:hover {
    background: rgba(214, 68, 54, 0.1);
}

/* Confirmed state: Remove text - no hover background */

.profile-modal__friend-remove-btn:active {
    transform: scale(0.95);
}

.profile-modal__friends-empty {
    padding: calc(3 * var(--element-width));
    color: #999;
    font-size: calc(3.4 * var(--element-width));
    text-align: center;
    font-style: italic;
}

/* --------------------------------
   6.4 Modal - Stats
   -------------------------------- */
.stats-modal__content {
    align-items: center;
    text-align: center;
    width: 100%;
    max-width: calc(100 * var(--app-width));
    padding: calc(6.8 * var(--element-width));
    margin: 0 auto;
}

.stats-modal__grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: calc(2.8 * var(--element-width));
}

.stats-modal__grid-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: calc(1.2 * var(--element-width));
}

.stats-modal__grid-value {
    font-size: calc(9.4 * var(--element-width));
    font-weight: 400;
    color: black;
    line-height: 1;
    font-family: 'Plus Jakarta Sans', sans-serif;
}

.stats-modal__grid-label {
    font-size: calc(2.8 * var(--element-width));
    font-weight: 400;
    color: black;
    text-transform: capitalize;
}

.stats-modal__divider {
    border: none;
    border-top: 1px solid #b4b4b4;
    margin: calc(5.8 * var(--element-width)) 0;
    width: 100%;
}

.stats-modal__distribution {
    width: 100%;
}

.stats-modal__distribution-title {
    font-size: calc(3.4 * var(--element-width));
    font-weight: 700;
    color: black;
    text-align: left;
    margin: 0 0 calc(3.8 * var(--element-width)) 0;
    letter-spacing: 0.5px;
}

.stats-modal__distribution-chart {
    display: flex;
    flex-direction: column;
    gap: calc(1.2 * var(--element-width));
}

.stats-modal__distribution-row {
    display: flex;
    align-items: center;
    gap: calc(2 * var(--element-width));
}

.stats-modal__distribution-number {
    font-size: calc(3.4 * var(--element-width));
    font-weight: 400;
    color: black;
    width: calc(2.8 * var(--element-width));
    text-align: center;
    flex-shrink: 0;
}

.stats-modal__distribution-bar-container {
    flex: 1;
    display: flex;
    align-items: center;
}

.stats-modal__distribution-bar {
    background-color: #787c7e;
    min-width: 7%;
    height: calc(4.6 * var(--element-width));
    display: flex;
    align-items: center;
    justify-content: flex-end;
    padding: 0 calc(2 * var(--element-width));
    transition: width 0.5s ease;
}

.stats-modal__distribution-bar[data-highlight="true"] {
    background-color: #6aaa64;
}

.stats-modal__distribution-count {
    font-size: calc(3.4 * var(--element-width));
    font-weight: 700;
    color: white;
}

.stats-modal__badges {
    width: 100%;
}

.stats-modal__badges-title {
    font-size: calc(3.4 * var(--element-width));
    font-weight: 700;
    color: black;
    text-align: left;
    margin: 0 0 calc(2 * var(--element-width)) 0;
    letter-spacing: 0.5px;
}

.stats-modal__badges-subtitle {
    font-size: calc(2.8 * var(--element-width));
    font-weight: 400;
    color: #555;
    text-align: left;
    margin: 0 0 calc(3.8 * var(--element-width)) 0;
}

.stats-modal__badges-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: calc(3.8 * var(--element-width));
}

.stats-modal__badge {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: calc(2 * var(--element-width));
    cursor: pointer;
}

.stats-modal__badge-icon {
    width: calc(18.2 * var(--element-width));
    height: calc(18.2 * var(--element-width));
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: #f0f0f0;
    border-radius: calc(2.8 * var(--element-width));
    position: relative;
}

.stats-modal__badge-icon--locked {
    opacity: 0.3;
    filter: grayscale(100%);
}

.stats-modal__badge-icon--unlocked {
    border: 2px solid #27ae60;
    box-shadow: 0 0 calc(2.8 * var(--element-width)) rgba(39, 174, 96, 0.4), inset 0 0 calc(1.8 * var(--element-width)) rgba(39, 174, 96, 1);
}

.stats-modal__badge-checkmark {
    position: absolute;
    top: calc(-1.2 * var(--element-width));
    right: calc(-1.2 * var(--element-width));
    width: calc(5.8 * var(--element-width));
    height: calc(5.8 * var(--element-width));
    background-color: #27ae60;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: calc(3.8 * var(--element-width));
    font-weight: bold;
    border: 2px solid white;
    box-shadow: 0 calc(0.4 * var(--element-width)) calc(1 * var(--element-width)) rgba(0, 0, 0, 0.2);
}

.stats-modal__badge-icon img {
    width: calc(12.6 * var(--element-width));
    height: calc(12.6 * var(--element-width));
    object-fit: contain;
}

.stats-modal__badge-name {
    font-size: calc(2.6 * var(--element-width));
    font-weight: 600;
    color: black;
    text-align: center;
}

.stats-modal__badge-progress-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: calc(1.2 * var(--element-width));
    width: 100%;
}

.stats-modal__badge-progress-bar {
    width: 100%;
    height: calc(1.4 * var(--element-width));
    background-color: #e0e0e0;
    border-radius: calc(0.8 * var(--element-width));
    overflow: hidden;
}

.stats-modal__badge-progress-fill {
    height: 100%;
    background-color: #27ae60;
    border-radius: calc(0.8 * var(--element-width));
    transition: width 0.3s ease;
}

.stats-modal__badge-progress-text {
    font-size: calc(2.2 * var(--element-width));
    color: #555;
    text-align: center;
}

.stats-modal__badge-date {
    font-size: calc(2.2 * var(--element-width));
    color: #27ae60;
    text-align: center;
    font-weight: 600;
}

/* --------------------------------
   6.4.1 Badge Tooltip
   -------------------------------- */
.badge-tooltip {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: white;
    border-radius: calc(2.8 * var(--element-width));
    box-shadow: 0 calc(2 * var(--element-width)) calc(7.4 * var(--element-width)) rgba(0, 0, 0, 0.2);
    padding: calc(5.8 * var(--element-width));
    max-width: calc(50 * var(--app-width));
    width: 90%;
    z-index: 10000;
    opacity: 0;
    transition: opacity 0.2s ease;
}

.badge-tooltip--visible {
    opacity: 1;
}

.badge-tooltip__content {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: calc(2.8 * var(--element-width));
}

.badge-tooltip__icon {
    width: calc(18.2 * var(--element-width));
    height: calc(18.2 * var(--element-width));
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: #f0f0f0;
    border-radius: calc(2.8 * var(--element-width));
}

.badge-tooltip__icon img {
    width: calc(12.6 * var(--element-width));
    height: calc(12.6 * var(--element-width));
    object-fit: contain;
}

.badge-tooltip__name {
    font-size: calc(4.6 * var(--element-width));
    font-weight: 700;
    color: black;
    text-align: center;
}

.badge-tooltip__description {
    font-size: calc(3.4 * var(--element-width));
    color: #555;
    text-align: center;
    line-height: 1.5;
}

.badge-tooltip__status {
    width: 100%;
    margin-top: calc(2 * var(--element-width));
    text-align: center;
}

.badge-tooltip__status--unlocked {
    display: inline-block;
    color: #27ae60;
    font-size: calc(3.4 * var(--element-width));
    font-weight: 600;
}

.badge-tooltip__progress {
    display: flex;
    flex-direction: column;
    gap: calc(1.4 * var(--element-width));
    width: 100%;
}

.badge-tooltip__progress-bar {
    width: 100%;
    height: calc(2 * var(--element-width));
    background-color: #e0e0e0;
    border-radius: calc(1.2 * var(--element-width));
    overflow: hidden;
}

.badge-tooltip__progress-fill {
    height: 100%;
    background-color: #27ae60;
    border-radius: calc(1.2 * var(--element-width));
    transition: width 0.3s ease;
}

.badge-tooltip__progress-text {
    font-size: calc(2.8 * var(--element-width));
    color: #555;
    text-align: center;
}

.badge-tooltip__arrow {
    display: none;
}

/* --------------------------------
   6.5 Modal - Info
   -------------------------------- */
.info-modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(calc(0.8 * var(--element-width)));
    z-index: 2000;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: calc(4.6 * var(--element-width));
    box-sizing: border-box;
    animation: uiFadeIn 0.2s ease-out;
}

.info-modal-container {
    background-color: #e3d5c5;
    padding: calc(6.8 * var(--element-width));
    border-radius: calc(4.6 * var(--element-width));
    box-shadow: 0 calc(2.2 * var(--element-width)) calc(9.2 * var(--element-width)) rgba(0,0,0,0.3);
    width: 100%;
    max-width: calc(90 * var(--app-width));
    max-height: 90dvh;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    align-items: center;
    position: relative;
    border: 1px solid rgba(255,255,255,0.2);
    box-sizing: border-box;
    scrollbar-width: none;
    -ms-overflow-style: none;
}

.info-modal-close-button {
    position: absolute;
    top: calc(3.4 * var(--element-width));
    right: calc(3.4 * var(--element-width));
    background: none;
    border: none;
    font-size: calc(10.2 * var(--element-width));
    color: #795548;
    cursor: pointer;
    padding: 0;
    line-height: 1;
    width: calc(10.2 * var(--element-width));
    height: calc(10.2 * var(--element-width));
    display: flex;
    align-items: center;
    justify-content: center;
    transition: color 0.2s;
}

.info-modal-close-button:active {
    transform: scale(0.9);
    transition: none;
}

.info-modal-container::-webkit-scrollbar {
    display: none;
}

.info-modal-content-container {
    text-align: center;
}

.info-modal-about-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-top: calc(2.2 * var(--element-width));
}

.info-modal-about-heading {
    font-size: calc(4.6 * var(--element-width));
    font-weight: 600;
    color: #5d4037;
    margin-bottom: calc(4.6 * var(--element-width));
}

.info-modal-about-text-1 {
    font-size: calc(3.8 * var(--element-width));
    line-height: 1.6;
    color: #5d4037;
    margin-bottom: calc(3.4 * var(--element-width));
}

.info-modal-about-text-2 {
    font-size: calc(3.8 * var(--element-width));
    line-height: 1.6;
    color: #5d4037;
}

.info-modal-divider {
    width: 100%;
    height: 1px;
    background: #d7ccc8;
    margin: calc(6.8 * var(--element-width)) 0;
}

.info-modal-contact-container {
    display: flex;
    flex-direction: column;
    align-items: center;
}

.info-modal-contact-heading {
    font-size: calc(4.6 * var(--element-width));
    font-weight: 600;
    color: #5d4037;
    margin-bottom: calc(2.2 * var(--element-width));
}

.info-modal-contact-text {
    font-size: calc(3.8 * var(--element-width));
    line-height: 1.6;
    color: #5d4037;
    margin-bottom: calc(2.2 * var(--element-width));
}

.info-modal-contact-email {
    display: inline-block;
    color: #000000;
    text-decoration: none;
    font-weight: 600;
    padding: calc(2.2 * var(--element-width)) calc(4.6 * var(--element-width));
    background: #f5f5f5;
    border-radius: calc(2 * var(--element-width));
    transition: all 0.2s ease;
}

.info-modal-contact-email:active {
    transform: scale(0.98);
    transition: none;
}

/* --------------------------------
   6.6 Modal - Results
   -------------------------------- */

.results-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    animation: resultsModalFadeIn 0.3s ease-in-out;
}

.results-modal--fade-out {
    animation: resultsModalFadeOut 0.3s ease-in-out forwards;
}

.results-modal__overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.6);
}

.results-modal__content {
    position: relative;
    z-index: 1001;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: calc(3.8 * var(--element-width));
    width: calc(100% - calc(9.2 * var(--element-width)));
    max-width: calc(90 * var(--app-width));
    max-height: 90dvh;
    overflow-y: auto;
    background: white;
    border-radius: calc(3.8 * var(--element-width));
    padding: calc(4.6 * var(--element-width));
    box-sizing: border-box;
    box-shadow: 0 calc(2.2 * var(--element-width)) calc(9.2 * var(--element-width)) rgba(0, 0, 0, 0.2);
    animation: resultsModalSlideUp 0.4s ease-out;
    scrollbar-width: none;
    -ms-overflow-style: none;
}

.results-modal__content::-webkit-scrollbar {
    display: none;
}

.results-modal__header {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: calc(2 * var(--element-width));
}

.results-modal__title {
    font-size: calc(7.8 * var(--element-width));
    font-weight: 700;
    color: #2c3e50;
    margin: 0;
    text-align: center;
}

.results-modal__score-section {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: calc(2.8 * var(--element-width));
    width: 100%;
    box-sizing: border-box;
}

.results-modal__score-display {
    background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
    border-radius: calc(3.8 * var(--element-width));
    padding: calc(2.8 * var(--element-width)) calc(5.8 * var(--element-width));
    box-shadow: 0 calc(1.4 * var(--element-width)) calc(3.8 * var(--element-width)) rgba(52, 152, 219, 0.3);
    animation: resultsModalScaleIn 0.5s ease-out 0.2s both;
}

.results-modal__score {
    font-size: calc(9.8 * var(--element-width));
    font-weight: 800;
    color: white;
    text-shadow: 0 calc(0.6 * var(--element-width)) calc(1.2 * var(--element-width)) rgba(0, 0, 0, 0.2);
}

.results-modal__message {
    font-size: calc(3.8 * var(--element-width));
    font-weight: 600;
    color: #34495e;
    text-align: center;
    margin: 0;
    animation: resultsModalSectionFadeIn 0.5s ease-out 0.4s both;
}

.results-modal__leaderboard-section {
    display: flex;
    flex: 1;
    flex-direction: column;
    width: 100%;
    min-height: 0;
    background: white;
    border-radius: calc(2.8 * var(--element-width));
    box-shadow: 0 calc(1.2 * var(--element-width)) calc(2.4 * var(--element-width)) rgba(0, 0, 0, 0.08);
    animation: resultsModalSectionFadeIn 0.5s ease-out 0.4s both;
}

.results-modal__leaderboard-tabs {
    display: flex;
    flex-shrink: 0;
    border-bottom: 2px solid #e9ecef;
    background: #f8f9fa;
}

.results-modal__leaderboard-tab {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: calc(1.4 * var(--element-width));
    padding: calc(3.2 * var(--element-width));
    border: none;
    background: transparent;
    color: #6c757d;
    font-size: calc(3.2 * var(--element-width));
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
    position: relative;
}

.results-modal__leaderboard-tab svg {
    width: calc(4.6 * var(--element-width));
    height: calc(4.6 * var(--element-width));
    flex-shrink: 0;
}

.results-modal__leaderboard-tab--active {
    color: #3498db;
    background: white;
}

.results-modal__leaderboard-tab--active::after {
    content: '';
    position: absolute;
    bottom: -2px;
    left: 0;
    right: 0;
    height: 2px;
    background: #3498db;
}

.results-modal__leaderboard-tab:active {
    transform: scale(0.98);
}

.results-modal__leaderboard-content {
    position: relative;
    display: flex;
    flex: 1;
    width: 100%;
    min-height: 0;
    max-height: calc(50 * var(--element-width));
    overflow-x: hidden;
    overflow-y: hidden;
    scrollbar-width: none;
    -ms-overflow-style: none;
}

.results-modal__leaderboard-content::-webkit-scrollbar {
    display: none;
}

.results-modal__leaderboard-slider {
    display: flex;
    flex-shrink: 0;
    width: 200%;
    min-height: 0;
    max-height: 100%;
    align-items: stretch;
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    transform: translateX(0);
}

.results-modal__leaderboard-content.show-global .results-modal__leaderboard-slider {
    transform: translateX(-50%);
}

.results-modal__friends-panel {
    --friends-button-area: calc(14 * var(--element-width));
    position: relative;
    display: flex;
    flex-direction: column;
    padding: calc(3 * var(--element-width));
    padding-bottom: var(--friends-button-area);
    box-sizing: border-box;
    width: 50%;
    max-height: 100%;
    align-items: center;
    justify-content: flex-start;
    gap: calc(2.2 * var(--element-width));
    color: #adb5bd;
}

.friends-scores-list {
    width: 100%;
    display: flex;
    flex-direction: column;
    gap: calc(1.8 * var(--element-width));
    overflow-y: auto;
    scrollbar-width: none;
    -ms-overflow-style: none;
    flex: 1;
    min-height: 0;
}

.friends-scores-list::-webkit-scrollbar {
    display: none;
}

.friends-score-item {
    display: flex;
    align-items: center;
    gap: calc(2.2 * var(--element-width));
    padding: calc(2.2 * var(--element-width));
    background: #f8f9fa;
    border-radius: calc(1.4 * var(--element-width));
}

.friends-score-item--incomplete {
    opacity: 0.6;
}

.friends-score-rank {
    font-size: calc(3.4 * var(--element-width));
    font-weight: 700;
    color: #6c757d;
    min-width: calc(5 * var(--element-width));
    text-align: center;
}

.friends-score-name {
    flex: 1;
    font-size: calc(3.4 * var(--element-width));
    font-weight: 500;
    color: #2c3e50;
    line-height: 1;
}

.friends-score-value {
    font-size: calc(3.4 * var(--element-width));
    font-weight: 600;
    color: #6c757d;
    font-family: var(--font-mono);
    line-height: 1;
}

.friends-score-answers {
    display: flex;
    gap: calc(1.2 * var(--element-width));
    align-items: center;
}

.friends-score-answer-indicator {
    width: calc(2.8 * var(--element-width));
    height: calc(2.8 * var(--element-width));
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: calc(2.8 * var(--element-width));
    line-height: 1;
}

.friends-empty-state {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: calc(2.2 * var(--element-width));
    text-align: center;
    flex: 1;
}

.friends-empty-state svg {
    width: calc(11 * var(--element-width));
    height: calc(11 * var(--element-width));
    color: #9ca3af;
    opacity: 1;
}

.friends-empty-state__title {
    font-size: calc(3.8 * var(--element-width));
    font-weight: 600;
    color: #9ca3af;
    font-family: var(--font-secondary);
}

.friends-empty-state__subtitle {
    font-size: calc(2.8 * var(--element-width));
    font-weight: 400;
    color: #868e96;
    max-width: calc(50 * var(--element-width));
    line-height: 1.4;
}

.friends-empty-state__button {
    position: absolute;
    bottom: calc(3 * var(--element-width));
    left: calc(3 * var(--element-width));
    right: calc(3 * var(--element-width));
    display: flex;
    align-items: center;
    justify-content: center;
    gap: calc(1.4 * var(--element-width));
    padding: calc(2.2 * var(--element-width)) calc(3.4 * var(--element-width));
    background: #3498db;
    color: white;
    border: none;
    border-radius: calc(1.8 * var(--element-width));
    font-size: calc(3.2 * var(--element-width));
    font-weight: 600;
    font-family: var(--font-secondary);
    cursor: pointer;
    transition: background 0.2s ease;
}

.friends-empty-state__button:hover {
    background: #2980b9;
}

.friends-empty-state__button:active {
    transform: scale(0.98);
}

.friends-empty-state__button svg {
    width: calc(4 * var(--element-width));
    height: calc(4 * var(--element-width));
    color: white;
    opacity: 1;
}

#results-guest-signin-btn {
    background: #000000;
}

#results-guest-signin-btn:hover {
    background: #1a1a1a;
}

.results-modal__global-panel {
    display: flex;
    flex-direction: column;
    padding: calc(3 * var(--element-width));
    box-sizing: border-box;
    width: 50%;
    max-height: 100%;
    justify-content: flex-start;
    overflow-y: auto;
    scrollbar-width: none;
    -ms-overflow-style: none;
}

.results-modal__global-panel::-webkit-scrollbar {
    display: none;
}

.results-modal__global-footer {
    font-size: calc(2.6 * var(--element-width));
    font-weight: 500;
    color: #868e96;
    text-align: center;
    margin-top: calc(3 * var(--element-width));
}

.results-modal__score-distribution {
    display: flex;
    flex-direction: row;
    gap: calc(3 * var(--element-width));
    align-items: stretch;
}

.results-modal__scores-column {
    display: flex;
    flex-direction: column;
    gap: calc(2.2 * var(--element-width));
}

.results-modal__divider {
    width: 1px;
    background: #dee2e6;
    flex-shrink: 0;
}

.results-modal__bars-column {
    display: flex;
    flex-direction: column;
    gap: calc(2.2 * var(--element-width));
    flex: 1;
}

.results-modal__bar-row {
    display: grid;
    grid-template-columns: 1fr auto;
    align-items: center;
    gap: calc(2.8 * var(--element-width));
}

.results-modal__score-label {
    font-size: calc(3.4 * var(--element-width));
    font-weight: 700;
    color: #2c3e50;
    height: calc(6 * var(--element-width));
    display: flex;
    align-items: center;
}

.results-modal__score-label--highlight {
    color: #34C759;
}

.results-modal__score-bar-container {
    position: relative;
    height: calc(6 * var(--element-width));
    background: transparent;
    border-radius: calc(1.4 * var(--element-width));
    overflow: hidden;
}

.results-modal__score-bar {
    height: 100%;
    background: linear-gradient(90deg, #c8d0d8 0%, #a8b2bc 100%);
    border-radius: calc(1.4 * var(--element-width));
    transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.results-modal__bar-row--highlight .results-modal__score-bar {
    background: linear-gradient(90deg, #4CD964 0%, #34C759 100%);
}

.results-modal__score-percentage {
    font-size: calc(3.2 * var(--element-width));
    font-weight: 600;
    color: #6c757d;
    min-width: calc(10 * var(--element-width));
    text-align: right;
}

.results-modal__bar-row--highlight .results-modal__score-percentage {
    color: #34C759;
}

.results-modal__score-indicator {
    font-size: calc(2.6 * var(--element-width));
    font-weight: 700;
    color: #3498db;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.results-modal__streak-section {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: calc(2 * var(--element-width));
    width: 100%;
    padding: calc(3.4 * var(--element-width));
    background: #f8f9fa;
    border-radius: calc(2.8 * var(--element-width));
    box-sizing: border-box;
    animation: resultsModalSectionFadeIn 0.5s ease-out 0.6s both;
}

.results-modal__streak-item {
    display: flex;
    align-items: center;
    gap: calc(2.8 * var(--element-width));
}

.results-modal__streak-icon {
    color: #ff6b6b;
    flex-shrink: 0;
    width: calc(6 * var(--element-width));
    height: calc(6 * var(--element-width));
}

.results-modal__streak-info {
    display: flex;
    flex-direction: column;
    gap: calc(0.6 * var(--element-width));
}

.results-modal__streak-value {
    font-size: calc(5.8 * var(--element-width));
    font-weight: 700;
    color: #2c3e50;
    line-height: 1;
}

.results-modal__streak-label {
    font-size: calc(2.8 * var(--element-width));
    font-weight: 500;
    color: #7f8c8d;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.results-modal__countdown-section {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: calc(1.4 * var(--element-width));
    padding: calc(2.8 * var(--element-width));
    background: white;
    border: 2px solid #e9ecef;
    border-radius: calc(2.2 * var(--element-width));
    width: 100%;
    box-sizing: border-box;
    animation: resultsModalSectionFadeIn 0.5s ease-out 0.8s both;
}

.results-modal__countdown-label {
    font-size: calc(2.8 * var(--element-width));
    font-weight: 600;
    color: #6c757d;
    margin: 0;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.results-modal__countdown {
    font-size: calc(5.8 * var(--element-width));
    font-weight: 700;
    color: #495057;
    font-family: 'Montserrat', sans-serif;
    letter-spacing: 0.05em;
}

.results-modal__actions {
    display: flex;
    flex-direction: column;
    gap: calc(2.2 * var(--element-width));
    width: 100%;
    box-sizing: border-box;
    animation: resultsModalSectionFadeIn 0.5s ease-out 1s both;
}

.results-modal__btn {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: calc(1.4 * var(--element-width));
    padding: calc(2.8 * var(--element-width)) calc(4.6 * var(--element-width));
    border: none;
    border-radius: calc(2.2 * var(--element-width));
    font-size: calc(3.4 * var(--element-width));
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
    width: 100%;
}

.results-modal__btn svg {
    width: calc(5.2 * var(--element-width));
    height: calc(5.2 * var(--element-width));
    flex-shrink: 0;
}

.results-modal__btn--primary {
    background: #d64436;
    color: white;
    box-shadow: 0 calc(1.2 * var(--element-width)) calc(2.8 * var(--element-width)) rgba(214, 68, 54, 0.3);
}

.results-modal__btn--primary:active {
    transform: scale(0.99);
    filter: brightness(0.9);
    transition: none;
}

.results-modal__btn--secondary {
    background: #f8f9fa;
    color: #495057;
    border: 2px solid #dee2e6;
}

.results-modal__btn--secondary:active {
    transform: scale(0.99);
    transition: none;
}

/* ========================================
   7. ANIMATIONS
   ======================================== */

@keyframes uiScaleUpFade {
    0% {
        opacity: 0;
        transform: scale(0.8);
    }
    100% {
        opacity: 1;
        transform: scale(1);
    }
}

@keyframes uiSpinnerRotation {
    to { transform: rotate(360deg); }
}

@keyframes uiFadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

@keyframes uiFadeOut {
    from { opacity: 1; }
    to { opacity: 0; }
}

@keyframes resultsModalFadeIn {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

@keyframes resultsModalSlideUp {
    from {
        opacity: 0;
        transform: translateY(calc(6.4 * var(--element-width))) scale(0.95);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

@keyframes resultsModalSectionFadeIn {
    from {
        opacity: 0;
        transform: translateY(calc(3.2 * var(--element-width)));
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes resultsModalBounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(calc(-1.6 * var(--element-width))); }
}

@keyframes resultsModalScaleIn {
    from {
        opacity: 0;
        transform: scale(0.8);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}

@keyframes resultsModalFadeOut {
    from {
        opacity: 1;
    }
    to {
        opacity: 0;
    }
}

.fade-out {
    animation: uiFadeOut 0.2s ease-out forwards;
}

/* ========================================
   8. RESPONSIVE OVERRIDES
   ======================================== */
/* Hover Effects (Desktop Only) */
@media (hover: hover) {
    .avatar--user-button:hover {
        transform: translateY(-2px);
        box-shadow: 0 calc(1 * var(--element-width)) calc(2.8 * var(--element-width)) rgba(0, 0, 0, 0.2);
        filter: brightness(0.95);
    }

    .avatar--profile-modal:hover {
        transform: scale(1.05);
        box-shadow: 0 calc(1.4 * var(--element-width)) calc(3.6 * var(--element-width)) rgba(0, 0, 0, 0.2);
    }

    .info__button:hover {
        background: #ffca28;
        transform: translateY(-2px);
        box-shadow: 0 calc(1 * var(--element-width)) calc(2.8 * var(--element-width)) rgba(0,0,0,0.2);
    }

    .guest-menu__button:hover {
        transform: translateY(-2px);
        box-shadow: 0 calc(1 * var(--element-width)) calc(2.8 * var(--element-width)) rgba(0,0,0,0.2);
    }

    .guest-menu__dropdown-item:hover {
        background-color: #f5f5f5;
    }

    .user-menu__button--logged-in:hover {
        transform: translateY(-2px);
    }

    .user-menu__dropdown-item:hover {
        background-color: #f5f5f5;
    }

    .welcome-screen__ready-btn:hover {
        transform: scale(1.05);
        background-color: #000;
    }

    .quiz-screen__show-results-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 calc(1.4 * var(--element-width)) calc(3.6 * var(--element-width)) rgba(52, 152, 219, 0.4);
    }

    .quiz-screen__prev-button:hover,
    .quiz-screen__next-button:hover {
        background: #f2f2f2;
        transform: translateY(-1px);
    }

    .quiz-screen__reference-button:hover {
        background: #f2f2f2;
        transform: translateY(-1px);
    }

    .quiz-screen__reference-close-button:hover {
        background: #6d4c41;
    }

    .quiz-screen__card-back-button:hover {
        background: #6d4c41;
        transform: translateY(-2px);
        box-shadow: 0 calc(1 * var(--element-width)) calc(2.8 * var(--element-width)) rgba(0, 0, 0, 0.15);
    }

    .quiz-screen__options label:hover {
        background-color: #f8fbff;
        border-color: #3498db;
        transform: translateY(-2px);
        box-shadow: 0 calc(1 * var(--element-width)) calc(1.4 * var(--element-width)) rgba(0,0,0,0.05);
    }

    .stacked-modal__close:hover {
        background-color: rgba(93, 64, 55, 0.1);
    }

    .auth-modal__btn--primary:hover {
        transform: translateY(-1px);
        box-shadow: 0 calc(1 * var(--element-width)) calc(2.8 * var(--element-width)) rgba(0, 0, 0, 0.2);
    }

    .auth-modal__btn--outline:hover {
        background-color: #f5f1ed;
        transform: translateY(-1px);
    }

    .profile-modal__color-swatch:hover {
        transform: scale(1.1);
        box-shadow: 0 calc(1 * var(--element-width)) calc(2.8 * var(--element-width)) rgba(0, 0, 0, 0.2);
    }

    .profile-modal__edit-btn:hover {
        background: rgba(0, 0, 0, 0.05);
        color: #495057;
        opacity: 1;
    }

    .profile-modal__action-btn--save:hover {
        background: #5fa8f5;
    }

    .profile-modal__action-btn--cancel:hover {
        background: #d1d5da;
    }

    .info-modal-close-button:hover {
        color: #2b1d0e;
    }

    .info-modal-contact-email:hover {
        background: #eeeeee;
        transform: translateY(-2px);
        box-shadow: 0 calc(0.4 * var(--element-width)) calc(1.8 * var(--element-width)) rgba(0,0,0,0.1);
    }

    .results-modal__btn--primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 calc(1.4 * var(--element-width)) calc(3.6 * var(--element-width)) rgba(214, 68, 54, 0.4);
    }

    .results-modal__btn--secondary:hover {
        background: #e9ecef;
        border-color: #ced4da;
    }
}

/* --------------------------------
   9. Friend Toast Notification
   -------------------------------- */
.friend-toast {
    position: fixed;
    bottom: calc(10 * var(--element-width));
    left: 50%;
    transform: translateX(-50%) translateY(calc(20 * var(--element-width)));
    background: #333;
    color: white;
    padding: calc(3.2 * var(--element-width)) calc(5 * var(--element-width));
    border-radius: calc(2 * var(--element-width));
    font-size: calc(3.8 * var(--element-width));
    font-weight: 500;
    z-index: 10000;
    opacity: 0;
    transition: opacity 0.3s ease, transform 0.3s ease;
    box-shadow: 0 calc(1 * var(--element-width)) calc(3 * var(--element-width)) rgba(0,0,0,0.3);
    max-width: calc(80 * var(--element-width));
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: calc(2 * var(--element-width));
}

.friend-toast--visible {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
}

.friend-toast--success {
    background: #28a745;
}

.friend-toast--error {
    background: #dc3545;
}

.friend-toast--info {
    background: #007bff;
}

.friend-toast--loading {
    background: #6c757d;
}

.friend-toast__spinner {
    display: inline-block;
    width: calc(4.2 * var(--element-width));
    height: calc(4.2 * var(--element-width));
    border: 2px solid rgba(255, 255, 255, 0.3);
    border-top-color: white;
    border-radius: 50%;
    animation: uiSpinnerRotation 0.6s linear infinite;
    flex-shrink: 0;
}